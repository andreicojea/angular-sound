var AngularSound;!function(t){var n=function(){function t(t,n){this.name=t,this.buffer=n}return t}(),o=function(){function t(t,n,o){this.$window=t,this.$http=n,this.$q=o,this.sounds=[]}return t.$inject=["$window","$http","$q"],t.prototype.initialize=function(){if(!this.context)if(this.$window.AudioContext)this.context=new this.$window.AudioContext;else{if(!this.$window.webkitAudioContext)throw"browser does not support the web audio api";this.context=new this.$window.webkitAudioContext}},t.prototype.loadSound=function(t){var o=this;this.initialize();var e=this.$q.defer();return this.$http.get(t.src,{responseType:"arraybuffer"}).then(function(i){o.context.decodeAudioData(i.data,function(i){if(i.duration>50)throw t.name+" is too long, this module is designed to handle sounds less than 50s long";var u=new n(t.name,i);o.sounds.push(u),e.resolve(o.getBufferSource(u))})},function(t){throw t}),e.promise},t.prototype.getSound=function(t){this.initialize();for(var n in this.sounds)if(this.sounds[n].name===t)return this.getBufferSource(this.sounds[n]);throw'no loaded sound called "'+t+'"'},t.prototype.getBufferSource=function(t){var n;return n=this.context.createBufferSource(),n.buffer=t.buffer,n.connect(this.context.destination),n},t}();t.SoundService=o}(AngularSound||(AngularSound={})),angular.module("mcwebb.sound",[]).service("SoundService",AngularSound.SoundService);