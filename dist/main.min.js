var AngularSound;!function(t){var n=function(){function t(t,n){this.name=t,this.buffer=n}return t}(),e=function(){function t(t,n,e){if(this.$http=n,this.$q=e,this.sounds=[],t.AudioContext)this.context=new t.AudioContext;else{if(!t.webkitAudioContext)throw"browser does not support the web audio api";this.context=new t.webkitAudioContext}}return t.$inject=["$window","$http","$q"],t.prototype.loadSound=function(t){var e=this,o=this.$q.defer();return this.$http.get(t.src,{responseType:"arraybuffer"}).then(function(u){e.context.decodeAudioData(u.data,function(u){if(u.duration>50)throw t.name+" is too long, this module is designed to handle sounds less than 50s long";var r=new n(t.name,u);e.sounds.push(r),o.resolve(e.getBufferSource(r))})},function(t){throw t}),o.promise},t.prototype.getSound=function(t){for(var n in this.sounds)if(this.sounds[n].name===t)return this.getBufferSource(this.sounds[n]);throw'no loaded sound called "'+t+'"'},t.prototype.getBufferSource=function(t){var n;return n=this.context.createBufferSource(),n.buffer=t.buffer,n.connect(this.context.destination),n},t}();t.SoundService=e}(AngularSound||(AngularSound={})),angular.module("mcwebb.angular-sound",[]).service("SoundService",AngularSound.SoundService);